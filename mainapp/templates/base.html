{% load static %}
{% load i18n %}
<!doctype html>
<html class="no-js" lang="{{ LANGUAGE_CODE }}">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BBZC3F6HCG"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BBZC3F6HCG');
    </script>
    
    {% block extra_head %}{% endblock %}
    
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    {% csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token }}">
    
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="{% static 'img/logo.png' %}?v=2">
    <link rel="icon" type="image/png" href="{% static 'img/logo.png' %}?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'img/logo.png' %}?v=2">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'img/logo.png' %}?v=2">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/logo.png' %}?v=2">
    <meta name="msapplication-TileImage" content="{% static 'img/logo.png' %}">
    
    <!-- Title -->
    {% with title_suffix=LANGUAGE_CODE|default:"en" %}
    <title>
        {% block title %}{% endblock %} | 
        {% if title_suffix == "tr" %}
            Patina Cappadocia - Turkey Hotels | Türk Hamamlı Cave Oteller | Turkey Tourism
        {% elif title_suffix == "en" %}
            Patina Cappadocia - Turkey Cave Hotels | Turkish Bath Suites | Turkey Tourism
        {% elif title_suffix == "de" %}
            Patina Cappadocia - Türkei Hotels | Türkisches Bad Höhlenhotels | Türkei Tourismus
        {% elif title_suffix == "fr" %}
            Patina Cappadocia - Hôtels Turquie | Suites Bain Turc Troglodytes | Tourisme Turquie
        {% elif title_suffix == "es" %}
            Patina Cappadocia - Hoteles Turquía | Suites Baño Turco Cueva | Turismo Turquía
        {% elif title_suffix == "ru" %}
            Patina Cappadocia - Отели Турции | Люксы Турецкая Баня Пещеры | Туризм Турция
        {% elif title_suffix == "ar" %}
            Patina Cappadocia - فنادق تركيا | أجنحة حمام تركي كهفية | سياحة تركيا
        {% endif %}
    </title>
    {% endwith %}
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Logo Meta Tags -->
    <meta property="og:image" content="{% static 'img/logo.png' %}">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="{% static 'img/logo.png' %}">
    
    <!-- Dynamic SEO Meta Tags Based on Language -->
    {% if LANGUAGE_CODE == 'tr' %}
    <meta name="description" content="⭐ Patina Cappadocia Yorumları - 5.0 ⭐ | En İyi Nevşehir Otelleri | Nevşehir Jakuzili Otel | Uçhisar Cave Otelleri | Nevşehir Otelleri En Yüksek Puan | Mağara Otel Kapadokya | Türk Hamamlı Suit Odalar">
    <meta name="keywords" content="patina cappadocia yorumları, nevşehir otelleri, nevşehir jakuzili otel, uçhisar otelleri, nevşehir otel, nevşehir otelleri en yüksek puan, nevşehir bungalov, uçhisar otel, kapadokya jakuzili oteller, nevşehir cave oteller, nevşehir termal oteller, uçhisar cave otelleri, kapadokya otelleri jakuzili, nevşehir butik otel, uçhisar butik otelleri, nevşehir mağara otel, nevşehir balayı otelleri, uçhisar jakuzili oteller, nevşehir en iyi oteller, kapadokya otelleri uçhisar, nevşehir konaklama">
    {% elif LANGUAGE_CODE == 'en' %}
    <meta name="description" content="⭐ Turkey Hotels Cappadocia - Best Cave Hotels Turkey | Turkish Bath Suite Rooms | Balloon Tour Hotels | Turkey Tourism Accommodation | Istanbul Ankara Cappadocia Hotels | Cave Hotels with Jacuzzi Turkey">
    <meta name="keywords" content="turkey hotels, hotels in turkey, cappadocia hotels, cave hotels turkey, turkey accommodation, turkey tourism, balloon tour hotels, turkish bath hotels, turkey spa hotels, luxury hotels turkey, boutique hotels turkey, cave suite turkey, jacuzzi hotels turkey, turkey honeymoon hotels, fairy chimney hotels, nevşehir hotels turkey, göreme hotels, uçhisar hotels, turkey thermal hotels, hamam hotels turkey, turkey cave rooms">
    {% elif LANGUAGE_CODE == 'de' %}
    <meta name="description" content="⭐ Türkei Hotels Kappadokien - Beste Höhlenhotels Türkei | Türkisches Bad Suiten | Ballonfahrt Hotels | Türkei Tourismus Unterkünfte | Istanbul Ankara Kappadokien Hotels | Höhlenhotels Jacuzzi Türkei">
    <meta name="keywords" content="türkei hotels, hotels türkei, kappadokien hotels, höhlenhotels türkei, türkei unterkünfte, türkei tourismus, ballonfahrt hotels, türkisches bad hotels, türkei spa hotels, luxushotels türkei, boutique hotels türkei, höhlen suite türkei, jacuzzi hotels türkei, türkei flitterwochen hotels, feenkamin hotels, nevşehir hotels türkei, göreme hotels, uçhisar hotels">
    {% elif LANGUAGE_CODE == 'fr' %}
    <meta name="description" content="⭐ Hôtels Turquie Cappadoce - Meilleurs Hôtels Troglodytes Turquie | Suites Bain Turc | Hôtels Tours Montgolfière | Tourisme Turquie Hébergements | Istanbul Ankara Cappadoce Hôtels | Hôtels Troglodytes Jacuzzi Turquie">
    <meta name="keywords" content="hôtels turquie, hotels turquie, cappadoce hôtels, hôtels troglodytes turquie, hébergement turquie, tourisme turquie, hôtels montgolfière, bain turc hôtels, hôtels spa turquie, hôtels luxe turquie, hôtels boutique turquie, suite troglodyte turquie, hôtels jacuzzi turquie, hôtels lune miel turquie, hôtels cheminées fées, nevşehir hôtels turquie, göreme hôtels, uçhisar hôtels">
    {% elif LANGUAGE_CODE == 'es' %}
    <meta name="description" content="⭐ Hoteles Turquía Capadocia - Mejores Hoteles Cueva Turquía | Suites Baño Turco | Hoteles Tours Globo | Turismo Turquía Alojamientos | Estambul Ankara Capadocia Hoteles | Hoteles Cueva Jacuzzi Turquía">
    <meta name="keywords" content="hoteles turquía, hotels turquia, capadocia hoteles, hoteles cueva turquía, alojamiento turquía, turismo turquía, hoteles globo, baño turco hoteles, hoteles spa turquía, hoteles lujo turquía, hoteles boutique turquía, suite cueva turquía, hoteles jacuzzi turquía, hoteles luna miel turquía, hoteles chimeneas hadas, nevşehir hoteles turquía, göreme hoteles, uçhisar hoteles">
    {% elif LANGUAGE_CODE == 'ru' %}
    <meta name="description" content="⭐ Отели Турции Каппадокия - Лучшие Пещерные Отели Турции | Люксы Турецкая Баня | Отели Туры Воздушный Шар | Туризм Турция Размещение | Стамбул Анкара Каппадокия Отели | Пещерные Отели Джакузи Турция">
    <meta name="keywords" content="отели турции, отели турция, каппадокия отели, пещерные отели турция, размещение турция, туризм турция, отели воздушный шар, турецкая баня отели, спа отели турция, роскошные отели турция, бутик отели турция, пещерный люкс турция, отели джакузи турция, отели медовый месяц турция, отели камины фей, невшехир отели турция, гёреме отели, учхисар отели">
    {% elif LANGUAGE_CODE == 'ar' %}
    <meta name="description" content="⭐ فنادق تركيا كابادوكيا - أفضل الفنادق الكهفية تركيا | أجنحة حمام تركي | فنادق جولات المنطاد | سياحة تركيا إقامة | إسطنبول أنقرة كابادوكيا فنادق | فنادق كهفية جاكوزي تركيا">
    <meta name="keywords" content="فنادق تركيا، فنادق كابادوكيا، فنادق كهفية تركيا، إقامة تركيا، سياحة تركيا، فنادق المنطاد، حمام تركي فنادق، فنادق سبا تركيا، فنادق فاخرة تركيا، فنادق بوتيك تركيا، جناح كهفي تركيا، فنادق جاكوزي تركيا، فنادق شهر عسل تركيا، فنادق مداخن الجنية، فنادق نوشهر تركيا، فنادق جوريمي، فنادق أوتشهيسار">
    {% endif %}

    <!-- Dynamic Open Graph Meta Tags -->
    {% if LANGUAGE_CODE == 'tr' %}
    <meta property="og:title" content="Patina Cappadocia - Lüks Mağara Otel Kapadokya, Nevşehir">
    <meta property="og:description" content="Kapadokya'nın en özel mağara oteli. Peri bacaları manzarası, özel tasarım odalar ve Türk misafirperverliği.">
    {% elif LANGUAGE_CODE == 'en' %}
    <meta property="og:title" content="Patina Cappadocia - Luxury Cave Hotel in Cappadocia">
    <meta property="og:description" content="The most exclusive cave hotel in Cappadocia. Fairy chimney views, custom-designed rooms, and Turkish hospitality.">
    {% elif LANGUAGE_CODE == 'de' %}
    <meta property="og:title" content="Patina Cappadocia - Luxuriöses Höhlenhotel in Kappadokien">
    <meta property="og:description" content="Das exklusivste Höhlenhotel in Kappadokien. Feenkaminaussichten, maßgeschneiderte Zimmer und türkische Gastfreundschaft.">
    {% elif LANGUAGE_CODE == 'fr' %}
    <meta property="og:title" content="Patina Cappadocia - Hôtel Troglodyte de Luxe en Cappadoce">
    <meta property="og:description" content="L'hôtel troglodyte le plus exclusif de Cappadoce. Vues sur les cheminées de fées, chambres sur mesure et hospitalité turque.">
    {% elif LANGUAGE_CODE == 'es' %}
    <meta property="og:title" content="Patina Cappadocia - Hotel Cueva de Lujo en Capadocia">
    <meta property="og:description" content="El hotel cueva más exclusivo de Capadocia. Vistas a las chimeneas de hadas, habitaciones personalizadas y hospitalidad turca.">
    {% elif LANGUAGE_CODE == 'ru' %}
    <meta property="og:title" content="Patina Cappadocia - Роскошный Пещерный Отель в Каппадокии">
    <meta property="og:description" content="Самый эксклюзивный пещерный отель в Каппадокии. Виды на камины фей, индивидуально оформленные номера и турецкое гостеприимство.">
    {% elif LANGUAGE_CODE == 'ar' %}
    <meta property="og:title" content="باتينا كابادوكيا - فندق كهفي فاخر في كابادوكيا">
    <meta property="og:description" content="أكثر الفنادق الكهفية حصرية في كابادوكيا. إطلالات على المداخن الجنية، غرف مصممة خصيصاً، وكرم الضيافة التركية.">
    {% endif %}
    
    <meta property="og:type" content="website">
    <meta property="og:locale" content="{{ LANGUAGE_CODE }}">
    <meta property="og:site_name" content="Patina Cappadocia">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="geo.region" content="TR-50" />
    <meta name="geo.placename" content="Nevşehir, Kapadokya" />
    <meta name="geo.position" content="38.643889;34.828333" />
    <meta name="ICBM" content="38.643889, 34.828333" />
    
    <!-- Dynamic Schema.org Hotel Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Hotel",
      "name": "Patina Cappadocia",
      {% if LANGUAGE_CODE == 'tr' %}
      "description": "Kapadokya'nın kalbinde, Nevşehir'de bulunan lüks mağara otel. Eşsiz peri bacaları manzarası ve özel tasarım odalar.",
      {% elif LANGUAGE_CODE == 'en' %}
      "description": "Luxury cave hotel in the heart of Cappadocia, Nevsehir. Unique fairy chimney views and custom-designed rooms.",
      {% elif LANGUAGE_CODE == 'de' %}
      "description": "Luxuriöses Höhlenhotel im Herzen Kappadokiens, Nevşehir. Einzigartige Feenkaminaussichten und maßgeschneiderte Zimmer.",
      {% elif LANGUAGE_CODE == 'fr' %}
      "description": "Hôtel troglodyte de luxe au cœur de la Cappadoce, Nevsehir. Vues uniques sur les cheminées de fées et chambres sur mesure.",
      {% elif LANGUAGE_CODE == 'es' %}
      "description": "Hotel cueva de lujo en el corazón de Capadocia, Nevsehir. Vistas únicas a las chimeneas de hadas y habitaciones personalizadas.",
      {% elif LANGUAGE_CODE == 'ru' %}
      "description": "Роскошный пещерный отель в сердце Каппадокии, Невшехир. Уникальные виды на камины фей и индивидуально оформленные номера.",
      {% elif LANGUAGE_CODE == 'ar' %}
      "description": "فندق كهفي فاخر في قلب كابادوكيا، نوشهر. إطلالات فريدة على المداخن الجنية وغرف مصممة خصيصاً.",
      {% endif %}
      "starRating": {
        "@type": "Rating",
        "ratingValue": "5.0"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0",
        "reviewCount": "{{ total_reviews_count|default:0 }}"
      },
      "priceRange": "₺₺₺₺",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Göreme",
        "addressLocality": "Nevşehir",
        "addressRegion": "Nevşehir",
        "addressCountry": "TR"
      },
      "amenityFeature": [
        {% if LANGUAGE_CODE == 'tr' %}
        {"@type": "LocationFeatureSpecification", "name": "Mağara Odalar"},
        {"@type": "LocationFeatureSpecification", "name": "Peri Bacaları Manzarası"},
        {"@type": "LocationFeatureSpecification", "name": "Türk Hamamı"},
        {"@type": "LocationFeatureSpecification", "name": "Şömineli Odalar"},
        {"@type": "LocationFeatureSpecification", "name": "Jakuzili Suite"},
        {"@type": "LocationFeatureSpecification", "name": "Ücretsiz WiFi"}
        {% elif LANGUAGE_CODE == 'en' %}
        {"@type": "LocationFeatureSpecification", "name": "Cave Rooms"},
        {"@type": "LocationFeatureSpecification", "name": "Fairy Chimney Views"},
        {"@type": "LocationFeatureSpecification", "name": "Turkish Bath"},
        {"@type": "LocationFeatureSpecification", "name": "Rooms with Fireplace"},
        {"@type": "LocationFeatureSpecification", "name": "Jacuzzi Suite"},
        {"@type": "LocationFeatureSpecification", "name": "Free WiFi"}
        {% elif LANGUAGE_CODE == 'de' %}
        {"@type": "LocationFeatureSpecification", "name": "Höhlenzimmer"},
        {"@type": "LocationFeatureSpecification", "name": "Feenkamin-Aussicht"},
        {"@type": "LocationFeatureSpecification", "name": "Türkisches Bad"},
        {"@type": "LocationFeatureSpecification", "name": "Zimmer mit Kamin"},
        {"@type": "LocationFeatureSpecification", "name": "Jacuzzi-Suite"},
        {"@type": "LocationFeatureSpecification", "name": "Kostenloses WLAN"}
        {% elif LANGUAGE_CODE == 'fr' %}
        {"@type": "LocationFeatureSpecification", "name": "Chambres Troglodytes"},
        {"@type": "LocationFeatureSpecification", "name": "Vue sur Cheminées de Fées"},
        {"@type": "LocationFeatureSpecification", "name": "Bain Turc"},
        {"@type": "LocationFeatureSpecification", "name": "Chambres avec Cheminée"},
        {"@type": "LocationFeatureSpecification", "name": "Suite avec Jacuzzi"},
        {"@type": "LocationFeatureSpecification", "name": "WiFi Gratuit"}
        {% elif LANGUAGE_CODE == 'es' %}
        {"@type": "LocationFeatureSpecification", "name": "Habitaciones Cueva"},
        {"@type": "LocationFeatureSpecification", "name": "Vistas a Chimeneas de Hadas"},
        {"@type": "LocationFeatureSpecification", "name": "Baño Turco"},
        {"@type": "LocationFeatureSpecification", "name": "Habitaciones con Chimenea"},
        {"@type": "LocationFeatureSpecification", "name": "Suite con Jacuzzi"},
        {"@type": "LocationFeatureSpecification", "name": "WiFi Gratuito"}
        {% elif LANGUAGE_CODE == 'ru' %}
        {"@type": "LocationFeatureSpecification", "name": "Пещерные Номера"},
        {"@type": "LocationFeatureSpecification", "name": "Вид на Камины Фей"},
        {"@type": "LocationFeatureSpecification", "name": "Турецкая Баня"},
        {"@type": "LocationFeatureSpecification", "name": "Номера с Камином"},
        {"@type": "LocationFeatureSpecification", "name": "Люкс с Джакузи"},
        {"@type": "LocationFeatureSpecification", "name": "Бесплатный WiFi"}
        {% elif LANGUAGE_CODE == 'ar' %}
        {"@type": "LocationFeatureSpecification", "name": "غرف كهفية"},
        {"@type": "LocationFeatureSpecification", "name": "إطلالات على المداخن الجنية"},
        {"@type": "LocationFeatureSpecification", "name": "حمام تركي"},
        {"@type": "LocationFeatureSpecification", "name": "غرف مع موقد"},
        {"@type": "LocationFeatureSpecification", "name": "جناح مع جاكوزي"},
        {"@type": "LocationFeatureSpecification", "name": "واي فاي مجاني"}
        {% endif %}
      ]
    }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="//{{ request.get_host }}{{ request.path }}">

    <!-- Alternate Language URLs -->
    {% get_available_languages as LANGUAGES %}
    {% get_language_info_list for LANGUAGES as languages %}
    {% for language in languages %}
    <link rel="alternate" hreflang="{{ language.code }}" href="//{{ request.get_host }}{% url 'set_language' %}?lang={{ language.code }}">
    {% endfor %}
    
    <!-- CSS here -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css">
    <!-- Owl Carousel CSS from CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/themify-icons.css' %}">
    <!-- Nice Select CSS from CDN - Optional -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nice-select@1.1.0/dist/css/nice-select.min.css"> -->
    <!-- Flaticon CSS (assuming it's in local static) -->
    <!-- <link rel="stylesheet" href="{% static 'css/flaticon.css' %}"> -->
    <!-- Gijgo CSS from CDN - Optional -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gijgo@1.9.14/css/gijgo.min.css"> -->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <!-- Slicknav CSS from CDN - Optional -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slicknav@1.0.10/dist/slicknav.min.css"> -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script>
    function changeLang(lang_code) {
        // Get current path without language prefix
        let path = window.location.pathname;
        let pathParts = path.split('/').filter(Boolean);
        
        // URL mapping for localized paths to English
        const urlMapping = {
            'iletisim': 'contact',
            'hakkimizda': 'about',
            'odalar': 'rooms',
            'контакты': 'contact',
            'о-нас': 'about',
            'номера': 'rooms',
            'contacto': 'contact',
            'sobre-nosotros': 'about',
            'habitaciones': 'rooms',
            'contact': 'contact',
            'about': 'about',
            'rooms': 'rooms',
            'kontakt': 'contact',
            'uber-uns': 'about',
            'zimmer': 'rooms',
            'اتصل': 'contact',
            'معلومات-عنا': 'about',
            'الغرف': 'rooms',
            'contact-fr': 'contact',
            'a-propos': 'about',
            'chambres': 'rooms'
        };

        // Remove current language code if it exists
        if (pathParts.length > 0 && ['tr', 'en', 'ar', 'ru', 'es', 'fr', 'de'].includes(pathParts[0])) {
            pathParts.shift();
        }

        // If there's a path, ensure it's in English
        if (pathParts.length > 0) {
            const currentPath = pathParts[0];
            if (urlMapping[currentPath]) {
                pathParts[0] = urlMapping[currentPath];
            }
        }

        // Construct new URL with selected language
        let newPath = '/' + lang_code + (pathParts.length > 0 ? '/' + pathParts.join('/') : '') + '/';
        
        // Create a form to submit the language change
        let form = document.createElement('form');
        form.method = 'post';
        form.action = '/i18n/setlang/';
        
        // Add CSRF token - try multiple methods
        let csrfToken = null;
        
        // Method 1: Try to get from hidden input (en güvenilir)
        const csrfInputElement = document.querySelector('[name=csrfmiddlewaretoken]');
        if (csrfInputElement && csrfInputElement.value) {
            csrfToken = csrfInputElement.value.trim();
        }
        
        // Method 2: Try to get from cookie (Django'nun varsayılan yöntemi)
        if (!csrfToken || csrfToken.length < 32) {
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                const trimmed = cookie.trim();
                if (trimmed.startsWith('csrftoken=')) {
                    csrfToken = trimmed.substring('csrftoken='.length);
                    // URL decode yap
                    try {
                        csrfToken = decodeURIComponent(csrfToken);
                    } catch(e) {
                        // Decode başarısız olursa olduğu gibi kullan
                    }
                    break;
                }
            }
        }
        
        // Method 3: Try to get from meta tag
        if (!csrfToken || csrfToken.length < 32) {
            const metaTag = document.querySelector('meta[name=csrf-token]');
            if (metaTag) {
                csrfToken = metaTag.getAttribute('content');
            }
        }
        
        // Method 4: Try to get from Django's csrf_token template tag (if available in global scope)
        if ((!csrfToken || csrfToken.length < 32) && typeof window.csrfToken !== 'undefined') {
            csrfToken = window.csrfToken;
        }
        
        if (!csrfToken || csrfToken.length < 32) {
            console.error('CSRF token bulunamadı veya geçersiz uzunlukta:', csrfToken ? csrfToken.length : 'null');
            // Sayfayı yeniden yükle
            window.location.reload();
            return;
        }
        
        let csrfInput = document.createElement('input');
        csrfInput.type = 'hidden';
        csrfInput.name = 'csrfmiddlewaretoken';
        csrfInput.value = csrfToken;
        
        // Add language input
        let langInput = document.createElement('input');
        langInput.type = 'hidden';
        langInput.name = 'language';
        langInput.value = lang_code;
        
        // Add next page input
        let nextInput = document.createElement('input');
        nextInput.type = 'hidden';
        nextInput.name = 'next';
        nextInput.value = newPath;
        
        // Append inputs and submit
        form.appendChild(csrfInput);
        form.appendChild(langInput);
        form.appendChild(nextInput);
        document.body.appendChild(form);
        form.submit();
    }
    </script>
    
    <style>
        /* Theme Colors Override */
        :root {
            --primary: #9E8B4C;
            --primary-hover: #7D6E3C;
        }

        /* Override Bootstrap Primary Colors */
        .btn-primary,
        .bg-primary,
        .badge-primary,
        .alert-primary,
        .btn-outline-primary:hover {
            background-color: var(--primary) !important;
            border-color: var(--primary) !important;
        }

        .btn-outline-primary {
            color: var(--primary) !important;
            border-color: var(--primary) !important;
        }

        .text-primary {
            color: var(--primary) !important;
        }

        /* Override Theme Elements */
        .main-menu ul li a:hover,
        .book_btn a:hover,
        .popup-with-form:hover {
            color: var(--primary) !important;
        }

        .main-menu ul li a:after {
            background: var(--primary) !important;
        }

        /* Fix for reservation form background */
        .mfp-bg {
            opacity: 0.8;
            background: #000;
        }
        
        /* Override Magnific Popup Styles */
        .mfp-wrap,
        .mfp-container,
        .mfp-content,
        .mfp-inline-holder,
        .mfp-ajax-holder {
            background: transparent !important;
        }
        
        .mfp-wrap::before,
        .mfp-wrap::after,
        .mfp-content::before,
        .mfp-content::after,
        .mfp-container::before,
        .mfp-container::after {
            display: none !important;
            content: none !important;
            background: none !important;
        }

        .white-popup-block {
            background: #fff;
            padding: 25px;
            margin: 40px auto;
            max-width: 500px;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            position: relative;
        }
        
        /* Fix for reservation button */
        .popup-with-form {
            background: transparent !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 4px !important;
            padding: 12px 26px !important;
            color: #fff !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            z-index: 1 !important;
            text-decoration: none !important;
            outline: none !important;
            box-shadow: none !important;
        }
        
        .popup-with-form:hover {
            background: #fff !important;
            color: var(--primary) !important;
            border-color: #fff !important;
        }
        
        .popup-with-form::before,
        .popup-with-form::after {
            display: none !important;
            content: none !important;
            background: none !important;
        }

        /* Additional Theme Color Overrides */
        .book_now_btn,
        .slider_area .single_slider .slider_text a,
        .about_area .about_info a.line-button:hover,
        .offers_area .single_offers a:hover,
        .video_area .video_area_inner a,
        .testimonial_area .single_testmonial .author_thumb {
            background: var(--primary) !important;
            border-color: var(--primary) !important;
        }

        .book_now_btn:hover {
            background: var(--primary-hover) !important;
            border-color: var(--primary-hover) !important;
        }

        /* Override any remaining blue colors */
        *[style*="background: rgb(0, 157, 255)"],
        *[style*="background: #009DFF"],
        *[style*="background-color: rgb(0, 157, 255)"],
        *[style*="background-color: #009DFF"] {
            background: transparent !important;
        }

        .badges-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .google-reviews-badge {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            max-width: 280px;
        }

        .google-reviews-badge:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .badge-content {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .google-logo {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
        }

        .google-logo i {
            background: linear-gradient(45deg, #4285f4, #34a853, #fbbc05, #ea4335);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .rating-info {
            flex: 1;
        }

        .rating {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .rating-score {
            font-size: 20px;
            font-weight: 600;
            margin-right: 8px;
        }

        .stars {
            color: #FFC107;
            font-size: 14px;
        }

        .review-count {
            font-size: 13px;
            color: #666;
        }

        .badge-cta {
            background: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .badge-cta i {
            margin-left: 5px;
            font-size: 12px;
        }

        .badge-cta:hover {
            background: var(--primary-hover);
            color: white;
        }

        /* WhatsApp Badge Styles */
        .whatsapp-badge {
            background: #25D366;
            border-radius: 50px;
            padding: 12px 20px;
            box-shadow: 0 5px 20px rgba(37, 211, 102, 0.4);
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 15px;
            white-space: nowrap;
        }

        .whatsapp-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.5);
            background: #20BA5A;
        }

        .whatsapp-badge i {
            font-size: 24px;
        }

        @media (max-width: 768px) {
            .badges-container {
                bottom: 20px;
                right: 20px;
                gap: 12px;
            }

            .google-reviews-badge {
                padding: 12px;
                max-width: 240px;
            }

            .whatsapp-badge {
                padding: 10px 18px;
                font-size: 14px;
            }

            .whatsapp-badge i {
                font-size: 20px;
            }

            .mobile-menu.active ~ .badges-container {
                display: none;
            }

            .google-logo {
                width: 35px;
                height: 35px;
                font-size: 20px;
            }

            .rating-score {
                font-size: 18px;
            }

            .stars {
                font-size: 12px;
            }

            .review-count {
                font-size: 12px;
            }

            .badge-cta {
                padding: 6px 12px;
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            .badges-container {
                bottom: 15px;
                right: 15px;
                left: 15px;
            }

            .google-reviews-badge {
                max-width: none;
            }

            .whatsapp-badge {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <!-- header-start -->
    {% include 'partials/_header.html' %}
    <!-- header-end -->

    {% block content %}{% endblock %}

    <!-- footer -->
    {% include 'partials/_footer.html' %}
    <!-- footer-end -->

    <!-- Badges Container -->
    <div class="badges-container">
        <!-- WhatsApp Badge -->
        <a href="https://wa.me/905424685050" target="_blank" class="whatsapp-badge" title="{% trans 'WhatsApp ile Hızlı İletişim' %}">
            <i class="fab fa-whatsapp"></i>
            <span>{% trans "WhatsApp" %}</span>
        </a>

        <!-- Google Reviews Badge -->
        <a href="{% url 'reviews' %}" class="google-reviews-badge">
            <div class="badge-content">
                <div class="google-logo">
                    <i class="fab fa-google"></i>
                </div>
                <div class="rating-info">
                    <div class="rating">
                        <span class="rating-score">{{ avg_rating|default:"5.0" }}</span>
                        <div class="stars">
                            {% for i in "12345"|make_list %}
                                {% if forloop.counter <= avg_rating|floatformat:0|add:"0" %}
                                <i class="fas fa-star"></i>
                                {% else %}
                                <i class="far fa-star"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="review-count"> {% trans "Değerlendirme" %}: {{ total_reviews_count|default:0 }}</div>
                </div>
            </div>
            <div class="badge-cta">
                {% trans "Değerlendir" %}
                <i class="fas fa-chevron-right"></i>
            </div>
        </a>
    </div>

    <!-- JS here -->
    <!-- jQuery MUST be loaded first for all other scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <script src="{% static 'js/vendor/modernizr-3.5.0.min.js' %}"></script>
    <script>
        // jQuery yüklendiğini kontrol et ve fallback ekle
        if (typeof jQuery === 'undefined') {
            console.error('jQuery yüklenemedi, fallback deneniyor...');
            var script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js';
            document.head.appendChild(script);
        }
    </script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <!-- Owl Carousel JS from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/owl.carousel.min.js"></script>
    <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'js/ajax-form.js' %}"></script>
    <script src="{% static 'js/waypoints.min.js' %}"></script>
    <script src="{% static 'js/jquery.counterup.min.js' %}"></script>
    <script src="{% static 'js/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'js/scrollIt.js' %}"></script>
    <script src="{% static 'js/jquery.scrollUp.min.js' %}"></script>
    <script src="{% static 'js/wow.min.js' %}"></script>
    <!-- Nice Select JS from CDN - Optional -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/nice-select@1.1.0/dist/js/jquery.nice-select.min.js"></script> -->
    <!-- Slicknav JS from CDN - Optional -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/slicknav@1.0.10/dist/jquery.slicknav.min.js"></script> -->
    <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'js/plugins.js' %}"></script>
    <!-- Gijgo JS from CDN - Optional -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/gijgo@1.9.14/js/gijgo.min.js"></script> -->
    <script src="{% static 'js/contact.js' %}"></script>
    <script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'js/jquery.form.js' %}"></script>
    <script src="{% static 'js/jquery.validate.min.js' %}"></script>
    <script src="{% static 'js/mail-script.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
</body>
</html> 