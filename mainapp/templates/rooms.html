{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Patina Cappadocia Rooms - Turkey Cave Hotels | Turkish Bath Suites | All Room Types" %}{% endblock %}

{% block content %}
<div class="rooms_page">
    <!-- Hero Section -->
    <div class="room_hero">
        <div class="container">
            <div class="hero_content text-center">
                <h1>{% trans "Lüks Mağara Odalarımız" %}</h1>
                <p class="lead">{% trans "Kapadokya'nın Doğal Dokusunda Modern Konfor" %}</p>
            </div>
        </div>
    </div>

    <!-- Rooms Content -->
    <div class="rooms_content">
        <div class="container">
            {% for room in rooms %}
            <!-- Room Item -->
            <div class="room_item">
                <div class="row align-items-center{% if forloop.counter|divisibleby:2 %} flex-row-reverse{% endif %}">
                    <div class="col-lg-6">
                        <div class="room_image">
                            {% if room.images.all %}
                                {% with main_image=room.images.first %}
                                <img src="{{ main_image.image.url }}" alt="{{ main_image.alt_text }}" class="main_image">
                                <div class="image_gallery">
                                    {% for image in room.images.all %}
                                    <img src="{{ image.image.url }}" alt="{{ image.alt_text }}" loading="lazy">
                                    {% endfor %}
                                </div>
                                {% endwith %}
                            {% else %}
                            <img src="{% static 'img/placeholder.jpg' %}" alt="{{ room.name_tr }}" class="main_image">
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="room_details">
                            <div class="section_title">
                                <span>
                                    {% if LANGUAGE_CODE == 'tr' %}
                                        {{ room.name_tr }}
                                    {% elif LANGUAGE_CODE == 'en' %}
                                        {{ room.name_en }}
                                    {% elif LANGUAGE_CODE == 'de' %}
                                        {{ room.name_de }}
                                    {% elif LANGUAGE_CODE == 'fr' %}
                                        {{ room.name_fr }}
                                    {% elif LANGUAGE_CODE == 'es' %}
                                        {{ room.name_es }}
                                    {% elif LANGUAGE_CODE == 'ru' %}
                                        {{ room.name_ru }}
                                    {% elif LANGUAGE_CODE == 'ar' %}
                                        {{ room.name_ar }}
                                    {% else %}
                                        {{ room.name_tr }}
                                    {% endif %}
                                </span>
                                <h2>{% if LANGUAGE_CODE == 'tr' %}{{ room.name_tr }} Detayları{% else %}{{ room.name_en }} Details{% endif %}</h2>
                            </div>
                            <p>
                                {% if LANGUAGE_CODE == 'tr' %}
                                    {{ room.description_tr }}
                                {% elif LANGUAGE_CODE == 'en' %}
                                    {{ room.description_en }}
                                {% elif LANGUAGE_CODE == 'de' %}
                                    {{ room.description_de }}
                                {% elif LANGUAGE_CODE == 'fr' %}
                                    {{ room.description_fr }}
                                {% elif LANGUAGE_CODE == 'es' %}
                                    {{ room.description_es }}
                                {% elif LANGUAGE_CODE == 'ru' %}
                                    {{ room.description_ru }}
                                {% elif LANGUAGE_CODE == 'ar' %}
                                    {{ room.description_ar }}
                                {% else %}
                                    {{ room.description_tr }}
                                {% endif %}
                            </p>

                            {% if room.features.all %}
                            <div class="room_features">
                                <h3>{% trans "Oda Özellikleri" %}</h3>
                                <ul>
                                    {% for feature in room.features.all %}
                                    <li>
                                        <i class="fa {{ feature.icon }}"></i>
                                        {% if LANGUAGE_CODE == 'tr' %}
                                            {{ feature.text_tr }}
                                        {% elif LANGUAGE_CODE == 'en' %}
                                            {{ feature.text_en }}
                                        {% elif LANGUAGE_CODE == 'de' %}
                                            {{ feature.text_de }}
                                        {% elif LANGUAGE_CODE == 'fr' %}
                                            {{ feature.text_fr }}
                                        {% elif LANGUAGE_CODE == 'es' %}
                                            {{ feature.text_es }}
                                        {% elif LANGUAGE_CODE == 'ru' %}
                                            {{ feature.text_ru }}
                                        {% elif LANGUAGE_CODE == 'ar' %}
                                            {{ feature.text_ar }}
                                        {% else %}
                                            {{ feature.text_tr }}
                                        {% endif %}
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}

                            <div class="room_booking">
                                <a href="https://www.reseliva.com/booknow/patina-cappadocia/" target="_blank" class="btn btn-primary">{% trans "Rezervasyon Yap" %}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.rooms_page {
    background: #fff;
    padding: 40px 0;
}

.room_hero {
    background: linear-gradient(135deg, #F5F1EB 0%, #E6DFD3 100%);
    padding: 100px 0 60px;
    display: flex;
    align-items: center;
    margin-bottom: 0;
    border-bottom: 1px solid #D4C5B0;
}

.hero_content {
    position: relative;
    z-index: 2;
}

.hero_content h1 {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: #5C4A37;
}

.hero_content .lead {
    font-size: 1.5rem;
    font-weight: 300;
    color: #7D6E3C;
}

.rooms_content {
    padding: 0 0 80px;
}

.room_item {
    margin-bottom: 80px;
    padding: 40px;
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

.room_image {
    position: relative;
    margin-bottom: 30px;
}

.room_image .main_image {
    width: 100%;
    height: auto;
    border-radius: 15px;
    object-fit: cover;
}

.image_gallery {
    display: flex;
    gap: 10px;
    margin-top: 15px;
    flex-wrap: wrap;
}

.image_gallery img {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    cursor: pointer;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.image_gallery img:hover {
    transform: scale(1.1);
}

.room_details {
    padding: 20px;
}

.section_title {
    margin-bottom: 30px;
}

.section_title span {
    display: block;
    color: var(--primary);
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
}

.section_title h2 {
    font-size: 2.5rem;
    font-weight: 600;
    color: #2C3E50;
    position: relative;
    display: inline-block;
}

.section_title h2:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -10px;
    width: 60px;
    height: 3px;
    background: var(--primary);
}

.room_details > p {
    color: #666;
    font-size: 1.1rem;
    line-height: 1.8;
    margin-bottom: 30px;
}

.room_features {
    margin: 30px 0;
}

.room_features h3 {
    font-size: 1.5rem;
    color: #2C3E50;
    margin-bottom: 20px;
}

.room_features ul {
    list-style: none;
    padding: 0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

.room_features li {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #666;
    font-size: 1rem;
}

.room_features i {
    color: var(--primary);
    font-size: 1.3rem;
    width: 30px;
    text-align: center;
}

.room_booking {
    margin-top: 30px;
}

.btn {
    display: inline-block;
    padding: 15px 40px;
    background: var(--primary);
    color: #fff;
    text-decoration: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    transition: all 0.3s ease;
    border: 2px solid var(--primary);
}

.btn:hover {
    background: transparent;
    color: var(--primary);
    text-decoration: none;
}

.btn-primary {
    background: var(--primary);
    color: #fff;
}

.btn-primary:hover {
    background: transparent;
    color: var(--primary);
}

@media (max-width: 991px) {
    .room_hero {
        padding: 80px 0 40px;
    }

    .hero_content h1 {
        font-size: 2.5rem;
    }

    .hero_content .lead {
        font-size: 1.2rem;
    }

    .room_item {
        margin-bottom: 60px;
        padding: 20px;
    }

    .section_title h2 {
        font-size: 2rem;
    }

    .room_features ul {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }
}

@media (max-width: 576px) {
    .room_hero {
        padding: 60px 0 30px;
    }

    .hero_content h1 {
        font-size: 2rem;
    }

    .hero_content .lead {
        font-size: 1rem;
    }

    .room_item {
        margin-bottom: 40px;
        padding: 15px;
    }

    .section_title h2 {
        font-size: 1.75rem;
    }

    .room_features ul {
        grid-template-columns: 1fr;
    }

    .image_gallery {
        overflow-x: auto;
    }

    .image_gallery img {
        flex-shrink: 0;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const galleryImages = document.querySelectorAll('.image_gallery img');
    const mainImages = document.querySelectorAll('.main_image');

    galleryImages.forEach(img => {
        img.addEventListener('click', function() {
            const mainImage = this.closest('.room_image').querySelector('.main_image');
            mainImage.src = this.src;
            mainImage.alt = this.alt;
        });
    });
});
</script>
{% endblock %}
